- name: Run Checkstyle (validate)
  run: mvn -B -Dcheckstyle.failOnViolation=false clean validate checkstyle:checkstyle

- name: Upload Checkstyle report
  if: always()
  uses: actions/upload-artifact@v4
  with:
    name: checkstyle-report
    path: |
      target/checkstyle-result.xml
      target/site/checkstyle.html
    if-no-files-found: warn

- name: Run tests
  run: mvn -B test

- name: Generate JaCoCo report (verify)
  run: mvn -B verify jacoco:report

- name: Upload JaCoCo coverage
  if: always()
  uses: actions/upload-artifact@v4
  with:
    name: jacoco-report
    path: |
      target/site/jacoco/jacoco.xml
      target/site/jacoco/index.html
    if-no-files-found: warn
